<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Página principal</title>
    <link rel="stylesheet" href="./CSS/Principal.css">
    <script src="https://kit.fontawesome.com/af9a1bc3d4.js" crossorigin="anonymous"></script>
    <link rel="icon" type="image/x-icon" href="./IMAGENES/favicon.ico">
</head>
<body>
    <!--Header-->
    <header>
        <div class="logo">
            <img src="./IMAGENES/Logo (Dark Version).png" alt="Logo" class="logo-img">
            <span class="logo-text">PGEmedic</span>
        </div>
        <span class="welcome-text">Bienvenido Usuario</span>
    </header>
    <!--Main-->
    <main class="content">
        <div class="config-buttons">
            <a id="agendar-cita" href="./Agendar_Citas.html">
                <i class="fa-solid fa-plus fa-2x"></i>
                <h2>Agendar cita</h2>
            </a>
            <div class="config-col">
                <a id="Actualizar-datos" href="./Update_data.html"><i class="fa-solid fa-user"></i>Actualizar datos personales</a>
                <a id="Ajustes-avanzados" href="./Ajustes_avanzados.html"><i class="fa-solid fa-gear"></i>Ajustes avanzados</a>
            </div>
        </div>
       
     <div class="notis-panel">
            <div id="calendar"></div> <!--Aquí se hace el calendar-->
            <div id="noti">
               <h4>Notificaciones</h4>
                <p id="alerta">No hay notificaciones pendientes.</p>
                <table class="tabla-noti">
                    <thead>
                        <tr>
                            <th>Cita</th>
                            <th>Fecha</th>
                        </tr>
                    </thead>
                    <tbody id="appointments-table-body">
                        <tr>
                            <td></td>
                            <td></td>
                        </tr>
                    </tbody>
                </table>
                <div id="delete-notis-conteiner">
                    <button id="delete-notis" title="Borrar todas las notificaciones"><i class="fa-solid fa-trash-can fa-2x"></i></button>
                </div>                 
            </div>
        </div>
    </main>
    <script>
    function getMonthName(month) {
        return ["Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio", "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"][month];
    }
    function renderCalendar(year, month) {
        let firstDay = new Date(year, month, 1, 12).getDay();
        //let firstDay = new Date(Date.UTC(year, month, 1)).getUTCDay();
        let daysInMonth = new Date(year, month + 1, 0).getDate();
        let html = `<table class='mini-calendar'><thead><tr><th colspan='7'>${getMonthName(month)} ${year}</th></tr><tr><th>Do</th><th>Lu</th><th>Ma</th><th>Mi</th><th>Ju</th><th>Vi</th><th>Sa</th></tr></thead><tbody>`;
        let day = 1;
        for (let i = 0; i < 6; i++) {
            html += '<tr>';
            for (let j = 0; j < 7; j++) {
                if ((i === 0 && j < (firstDay === 0 ? 6 : firstDay)) || day > daysInMonth) {
                    html += '<td></td>';
                } else {
                    html += `<td>${day}</td>`;
                    day++;
                }
            }
            html += '</tr>';
            if (day > daysInMonth) break;
        }
        html += '</tbody></table>';
        return html;
    }
    const calendarDiv = document.getElementById('calendar');
    const now = new Date();
    let year = now.getFullYear();
    let month = now.getMonth();
    let nextMonth = month + 1;
    let nextYear = year;
    if (nextMonth > 11) { nextMonth = 0; nextYear++; }
    calendarDiv.innerHTML = renderCalendar(year, month) + renderCalendar(nextYear, nextMonth);
    </script>
    <script src="./JS/Principal.js"></script>
</body>
</html>